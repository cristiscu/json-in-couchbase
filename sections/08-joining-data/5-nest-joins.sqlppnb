{"cells":[{"kind":2,"language":"SQL++","value":"select * from [\r\n    { \"id\": 1, \"name\": 'John' },\r\n    { \"id\": 2, \"name\": 'Mary' },\r\n    { \"id\": 3, \"name\": 'Jack' }\r\n] person\r\nunion\r\nselect * from [\r\n    { \"total\": 100, \"pid\": 1 },\r\n    { \"total\": 200, \"pid\": 1 },\r\n    { \"total\": 180, \"pid\": 2 }\r\n] `order`"},{"kind":2,"language":"SQL++","value":"with persons as (\r\n    select p.* from [\r\n        { \"id\": 1, \"name\": 'John' },\r\n        { \"id\": 2, \"name\": 'Mary' },\r\n        { \"id\": 3, \"name\": 'Jack' }] p),\r\n\r\norders as (\r\n    select o.* from [\r\n        { \"total\": 100, \"pid\": 1 },\r\n        { \"total\": 200, \"pid\": 1 },\r\n        { \"total\": 180, \"pid\": 2 }] o)\r\n\r\nselect * from persons\r\nunion\r\nselect * from orders"},{"kind":2,"language":"SQL++","value":"with persons as (\r\n    select p.* from [\r\n        { \"id\": 1, \"name\": 'John' },\r\n        { \"id\": 2, \"name\": 'Mary' },\r\n        { \"id\": 3, \"name\": 'Jack' }] p),\r\n\r\norders as (\r\n    select o.* from [\r\n        { \"total\": 100, \"pid\": 1 },\r\n        { \"total\": 200, \"pid\": 1 },\r\n        { \"total\": 180, \"pid\": 2 }] o)\r\n\r\nselect p.name, o orders\r\nfrom persons p LEFT NEST orders o ON p.id = o.pid\r\norder by p.name"},{"kind":2,"language":"SQL++","value":"with persons as (\r\n    select p.* from [\r\n        { \"id\": 1, \"name\": 'John' },\r\n        { \"id\": 2, \"name\": 'Mary' },\r\n        { \"id\": 3, \"name\": 'Jack' }] p),\r\n\r\norders as (\r\n    select o.* from [\r\n        { \"total\": 100, \"pid\": 1 },\r\n        { \"total\": 200, \"pid\": 1 },\r\n        { \"total\": 180, \"pid\": 2 }] o)\r\n\r\nselect p.name, ARRAY o2.total FOR o2 IN o END as totals\r\nfrom persons p LEFT NEST orders o ON p.id = o.pid\r\norder by p.name"},{"kind":2,"language":"SQL++","value":"with persons as (\r\n    select p.* from [\r\n        { \"id\": 1, \"name\": 'John' },\r\n        { \"id\": 2, \"name\": 'Mary' },\r\n        { \"id\": 3, \"name\": 'Jack' }] p),\r\n\r\norders as (\r\n    select o.* from [\r\n        { \"total\": 100, \"pid\": 1 },\r\n        { \"total\": 200, \"pid\": 1 },\r\n        { \"total\": 180, \"pid\": 2 }] o)\r\n\r\nselect p.name, ARRAY_AGG(o.total) as totals\r\nfrom persons p LEFT JOIN orders o ON p.id = o.pid\r\ngroup by p.name\r\norder by p.name"}]}