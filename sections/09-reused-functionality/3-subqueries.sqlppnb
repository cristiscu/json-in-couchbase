{"cells":[{"kind":2,"language":"SQL++","value":"select b.*\r\nfrom test.samples.books b"},{"kind":1,"language":"markdown","value":"Uncorrelated Subqueries\r\n* with average book price\r\n* in the SELECT, WHERE, FROM clauses"},{"kind":2,"language":"SQL++","value":"select raw ROUND(AVG(b2.price), 2)\r\nfrom test.samples.books b2"},{"kind":2,"language":"SQL++","value":"select b.title, b.price, \r\n    (select raw ROUND(AVG(b2.price), 2)\r\n    from test.samples.books b2)[0] avg_price\r\nfrom test.samples.books b"},{"kind":2,"language":"SQL++","value":"select b.*\r\nfrom test.samples.books b\r\nwhere b.price > (select raw ROUND(AVG(b2.price), 2)\r\n    from test.samples.books b2)[0]"},{"kind":2,"language":"SQL++","value":"select b.*\r\nfrom (\r\n    select b3.* from test.samples.books b3\r\n    where b3.price > (\r\n        select raw ROUND(AVG(b2.price), 2)\r\n        from test.samples.books b2)[0]) b"},{"kind":1,"language":"markdown","value":"Correlated Subqueries\r\n* on the new WHERE clause, only for the books in the same category\r\n* in the SELECT, WHERE, FROM clauses"},{"kind":2,"language":"SQL++","value":"select raw ROUND(AVG(b2.price), 2)\r\nfrom test.samples.books b2\r\nwhere b2.category = 'fiction'"},{"kind":2,"language":"SQL++","value":"select b.title, b.price, b.category,\r\n    (select raw ROUND(AVG(b2.price), 2)\r\n    from test.samples.books b2\r\n    where b2.category = b.category)[0] avg_price\r\nfrom test.samples.books b"},{"kind":2,"language":"SQL++","value":"select b.*\r\nfrom test.samples.books b\r\nwhere b.price > (select raw ROUND(AVG(b2.price), 2)\r\n    from test.samples.books b2\r\n    where b2.category = b.category)[0]"},{"kind":2,"language":"SQL++","value":"select b.*\r\nfrom (\r\n    select b3.*\r\n    from test.samples.books b3\r\n    where b3.price > (\r\n        select raw ROUND(AVG(b2.price), 2)\r\n        from test.samples.books b2\r\n        where b2.category = b3.category)[0]) b"}]}